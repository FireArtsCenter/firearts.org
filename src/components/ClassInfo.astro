---
// import { Image } from 'astro:assets';
import ScheduleTimes from '@/components/Classes/ScheduledTimes.astro';
import Button from '@/components/Button.astro';
import Text from '@/components/Text.astro';

interface Props {
	images?: any[];
	instructors?: any[];
	showScheduledTimes?: boolean;
	scheduledTimes: any[];
	fee?: string[];
	description?: any;
	disclaimers?: string[];
}

const {
	instructors,
	showScheduledTimes,
	scheduledTimes,
	fee,
	description,
	disclaimers,
} = Astro.props;
const instructorsString = instructors?.reduce(
	(instructorNames, currentInstructor, index) => {
		if (instructors.length === 1) {
			return currentInstructor.fields.name;
		} else {
			return index === 0
				? currentInstructor.fields.name
				: [instructorNames, currentInstructor.fields.name].join(', ');
		}
	},
	''
);
---

{
	/* @// TODO:  <12-02-26, john> add image back //
	images?.detail && <Image {...images.detail} />*/
}
{
	instructorsString && (
		<>
			<Text as='h3'>Instructors</Text>
			<Text>{instructorsString}</Text>
		</>
	)
}

<Text as='h3'>Schedule</Text>
<ScheduleTimes
	showScheduledTimes={showScheduledTimes}
	scheduledTimes={scheduledTimes}
/>

{
	fee && (
		<>
			<Text as='h3'>Fee</Text>
			<Text>{fee.join(', ')}</Text>
		</>
	)
}

<div set:html={description} class='flex flex-col gap-4 text-lg' />

{
	disclaimers && (
		<div
			class='my-4 border-l-4 border-orange-300 bg-orange-700 px-4 py-2 text-white'
			role='alert'
		>
			{disclaimers.map((disclaimer) => (
				<Text class='text-sm md:text-sm'>{disclaimer}</Text>
			))}
		</div>
	)
}
<Button appearance='primary' class='mt-4' href='/register/'>Register Now</Button
>
