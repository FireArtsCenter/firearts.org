---
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '../utils/styles';
import Link from '@/components/Link.astro';

const buttonVariants = cva(
	// Base styles that always apply
	'block border text-center font-semibold text-white no-underline hover:brightness-150 md:inline md:rounded',
	{
		variants: {
			appearance: {
				primary:
					'border-fac-red bg-fac-red text-white hover:text-white focus:text-white',
				secondary: 'border-white bg-black hover:border-fac-orange',
			},
			size: {
				large: 'px-10 py-5 text-2xl',
				normal: 'px-8 py-3',
			},
		},
		defaultVariants: {
			appearance: 'primary',
		},
	}
);

interface Props extends VariantProps<typeof buttonVariants> {
	href: string;
	class?: string;
}

const {
	href,
	appearance = 'primary',
	size = 'normal',
	class: overrideStyles,
} = Astro.props;

// @TODO: add a way to handle non-navigation buttons. for now error
if (!href) throw new Error('Supply an href to the button.');
---

{
	href && (
		<Link
			class={cn(buttonVariants({ appearance, size }), overrideStyles)}
			href={href}
		>
			<slot />
		</Link>
	)
}
