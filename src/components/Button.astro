---
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '../utils/styles';
import Link from '@/components/Link.astro';

const buttonVariants = cva(
	// Base styles that always apply
	'block border-1 px-8 py-3 text-center font-semibold text-white no-underline hover:brightness-150 md:inline-block md:rounded',
	{
		variants: {
			appearance: {
				primary:
					'bg-fac-red border-fac-red text-white hover:text-white focus:text-white',
				secondary: 'hover:border-fac-orange border-white bg-black',
			},
		},
		defaultVariants: {
			appearance: 'primary',
		},
	}
);

interface Props extends VariantProps<typeof buttonVariants> {
	href: string;
	class?: string;
}

const { href, appearance = 'primary', class: overrideStyles } = Astro.props;

// @TODO: add a way to handle non-navigation buttons. for now error
if (!href) throw new Error('Supply an href to the button.');
---

{
	href && (
		<Link
			class={cn(buttonVariants({ appearance }), overrideStyles)}
			href={href}
		>
			<slot />
		</Link>
	)
}
